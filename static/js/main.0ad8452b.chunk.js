(this.webpackJsonpcode=this.webpackJsonpcode||[]).push([[0],{13:function(t,e){t.exports={msToString:function(t){var e=Math.floor(t/1e3),a=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60);return e%=60,"".concat(a.toString().padStart(2,"0"),"h ").concat(n.toString().padStart(2,"0"),"m ").concat(e.toString().padStart(2,"0"),"s")},today:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},betterDateString:function(t){var e=t.split("-"),a=new Date(Number(e[0]),Number(e[1])-1,Number(e[2])).toDateString().split(" ");return"".concat(a[2]," ").concat(a[1]," ").concat(a[3])}}},47:function(t,e,a){t.exports=a(67)},67:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=a(35),i=a(24),s=a(32),u=a.n(s),m=a(36),d=a(25),g=a(26),p=a(30),h=a(29),v=a(81),f=a(83),b=a(87),E=a(88),S=a(84),y=a(85),I=a(86),j=a(13),T="the_analyst",O=a(37).initializeApp({apiKey:"AIzaSyCMtOtoFQxFUovA9Pteel8wZvTH0bVo07s",authDomain:"code-d740d.firebaseapp.com",databaseURL:"https://code-d740d.firebaseio.com",projectId:"code-d740d",storageBucket:"code-d740d.appspot.com",messagingSenderId:"844208277084",appId:"1:844208277084:web:0af7b99555087e8c2e0899",measurementId:"G-C82RSPWHP7"}),w=O.firestore(),D=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).fetchData=Object(m.a)(u.a.mark((function t(){var e,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({loading:!0}),t.next=3,w.collection("users").doc(T).get();case 3:e=t.sent.data(),a=void 0===(a=e[Object(j.today)()])?0:a,n.setState({localTime:a,untilNow:a,loading:!1});case 7:case"end":return t.stop()}}),t)}))),n.dbAction=function(){var t=Object(j.today)(),e=Date.now()-n.state.startTime;w.collection("users").doc(T).update(Object(i.a)({},t,n.state.untilNow+e))},n.updateTimer=function(){n.setState({localTime:n.state.localTime+1e3})},n.toggleTimer=function(){var t=Object(l.a)({},n.state);!1===n.state.running?(t.dbIntervalId=setInterval(n.dbAction,6e4),t.localIntervalId=setInterval(n.updateTimer,1e3),t.startTime=Date.now()):(clearInterval(t.dbIntervalId),clearInterval(t.localIntervalId),console.log("Error rate : ".concat(Date.now()-n.state.startTime-(n.state.localTime-n.state.untilNow)," ms"))),t.running=!t.running,n.setState(t,(function(){t.running||n.fetchData()}))},n.state={startTime:null,running:!1,dbIntervalId:null,localIntervalId:null,localTime:0,loading:null,untilNow:null},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return this.state.loading&&null==this.state.untilNow?r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(v.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,justify:"center",direction:"column",alignItems:"center",spacing:4},r.a.createElement(f.a,{item:!0},r.a.createElement(b.a,null,r.a.createElement(E.a,{value:0,variant:this.state.running?"indeterminate":"determinate"}),r.a.createElement(S.a,{style:{textAlign:"center"}},r.a.createElement(y.a,{variant:"h5",component:"h2"},T.toString()),r.a.createElement(y.a,{component:"p"},Object(j.msToString)(this.state.localTime)),r.a.createElement(I.a,{color:this.state.running?"secondary":"primary",variant:"contained",onClick:this.toggleTimer},this.state.running?"Stop":"Start"))))))}}]),a}(r.a.Component),x=a(42),k=O.firestore(),M=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(d.a)(this,a),(t=e.call(this)).state={totalTime:0,sessions:null,loading:!0,streamSub:null},t}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;k.collection("users").doc(T).onSnapshot((function(e){for(var a=[],n=e.data(),r=0,o=0,c=Object.entries(n);o<c.length;o++){var l=Object(x.a)(c[o],2),i=l[0],s=l[1];r+=s,a.push({date:i,length:s})}a.sort((function(t,e){return t.date<e.date?1:t.date>e.date?-1:0})),t.setState({sessions:a,loading:!1,totalTime:r})}))}},{key:"render",value:function(){return this.state.loading?r.a.createElement(f.a,{container:!0,justify:"center"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,justify:"center",direction:"row",spacing:2,alignItems:"center"},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(b.a,{style:{margin:"1%"}},r.a.createElement(S.a,{style:{textAlign:"center"}},r.a.createElement(y.a,{variant:"h5",component:"h2"},Object(j.msToString)(this.state.totalTime)),r.a.createElement(y.a,{color:"textSecondary"},"spent on Competitive Programming")))),this.state.loading?r.a.createElement(f.a,{item:!0}," ",r.a.createElement(v.a,null)," "):this.state.sessions.map((function(t,e){return r.a.createElement(f.a,{item:!0,key:e},r.a.createElement(b.a,null,r.a.createElement(E.a,{value:Math.min(Math.floor(t.length/1032e4*100),100),variant:"determinate"}),r.a.createElement(S.a,{style:{textAlign:"center"}},r.a.createElement(y.a,{variant:"h5",component:"h2"},Object(j.msToString)(t.length)),r.a.createElement(y.a,{color:"textSecondary"},Object(j.betterDateString)(t.date)))))}))))}}]),a}(r.a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{justifyContent:"center",alignItems:"center"}},r.a.createElement(D,null),r.a.createElement(M,null)))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.0ad8452b.chunk.js.map