{"version":3,"sources":["utils.js","User.js","db.js","App.js","Sessions.js","index.js"],"names":["module","exports","msToString","milliseconds","seconds","Math","floor","hours","minutes","toString","padStart","today","now","Date","getFullYear","getMonth","getDate","betterDateString","date","ad","split","d","Number","toDateString","user","db","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","App","props","fetchData","a","setState","loading","collection","doc","get","data","untilNow","undefined","localTime","dbAction","key","value","state","startTime","update","updateTimer","toggleTimer","stateSnap","running","dbIntervalId","setInterval","localIntervalId","clearInterval","console","log","this","style","position","left","top","transform","CircularProgress","Fragment","Grid","container","justify","direction","alignItems","spacing","item","Card","LinearProgress","variant","CardContent","textAlign","Typography","component","Button","color","onClick","React","Component","Sessions","totalTime","sessions","streamSub","onSnapshot","snapshot","Object","entries","push","length","sort","b","xs","margin","map","e","id","min","ReactDOM","render","StrictMode","justifyContent","document","getElementById"],"mappings":"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","file":"static/js/main.0ad8452b.chunk.js","sourcesContent":["function msToString(milliseconds) {\n  var seconds = Math.floor(milliseconds / 1000);\n  const hours = Math.floor(seconds / 3600);\n  seconds %= 3600;\n  const minutes = Math.floor(seconds / 60);\n  seconds %= 60;\n  return `${hours.toString().padStart(2, \"0\")}h ${minutes.toString().padStart(2, \"0\")}m ${seconds.toString().padStart(2, \"0\")}s`;\n}\n\nfunction today() {\n  const now = new Date();\n  return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, \"0\")}-${now.getDate().toString().padStart(2, \"0\")}`;\n}\n\nfunction betterDateString(date) {\n  var ad = date.split('-');\n  var d = new Date(\n    Number(ad[0]),\n    Number(ad[1]) - 1,\n    Number(ad[2]),\n  ).toDateString().split(\" \");\n  return `${d[2]} ${d[1]} ${d[3]}`;\n}\n\nmodule.exports = {msToString, today, betterDateString};","var user = \"the_analyst\";\n\nexport default user;","import * as firebase from 'firebase';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCMtOtoFQxFUovA9Pteel8wZvTH0bVo07s\",\n  authDomain: \"code-d740d.firebaseapp.com\",\n  databaseURL: \"https://code-d740d.firebaseio.com\",\n  projectId: \"code-d740d\",\n  storageBucket: \"code-d740d.appspot.com\",\n  messagingSenderId: \"844208277084\",\n  appId: \"1:844208277084:web:0af7b99555087e8c2e0899\",\n  measurementId: \"G-C82RSPWHP7\"\n};\nvar db = firebase.initializeApp(firebaseConfig);\n\nexport default db;\n","import React from 'react';\nimport { Card, CardContent, Typography, Button, CircularProgress, Grid, LinearProgress } from '@material-ui/core';\nimport { msToString, today } from './utils';\nimport user from './User';\nimport db from './db';\n\nconst firestore = db.firestore();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startTime: null,\n      running: false,\n      dbIntervalId: null,\n      localIntervalId: null,\n      localTime: 0,\n      loading: null,\n      untilNow: null,\n    }\n  }\n  fetchData = async () => {\n    this.setState({ loading: true });\n    const data = (await firestore.collection(\"users\").doc(user).get()).data();\n    var untilNow;\n    untilNow = data[today()];\n    untilNow = untilNow === undefined ? 0 : untilNow;\n    this.setState({\n      localTime: untilNow,\n      untilNow: untilNow,\n      loading: false,\n    })\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  dbAction = () => {\n    const key = today();\n    const value = Date.now() - this.state.startTime;//milliseconds\n    firestore.collection(\"users\").doc(user).update({ [key]: this.state.untilNow + value });\n  }\n\n  updateTimer = () => {\n    this.setState({\n      localTime: this.state.localTime + 1000\n    });\n  }\n\n  toggleTimer = () => {\n    var stateSnap = { ...this.state };\n    if (this.state.running === false) {\n      stateSnap.dbIntervalId = setInterval(this.dbAction, 60000);\n      stateSnap.localIntervalId = setInterval(this.updateTimer, 1000);\n      stateSnap.startTime = Date.now();\n    } else {\n      clearInterval(stateSnap.dbIntervalId);\n      clearInterval(stateSnap.localIntervalId);\n      console.log(`Error rate : ${(Date.now() - this.state.startTime) - (this.state.localTime - this.state.untilNow)} ms`);\n    }\n    stateSnap.running = !stateSnap.running;\n    this.setState(stateSnap, () => {\n      if (!stateSnap.running) {\n        this.fetchData();\n      }\n    });\n  }\n\n  render() {\n    if (this.state.loading && this.state.untilNow == null) {\n      return (\n        <div\n          style={{\n            position: 'absolute', left: '50%', top: '50%',\n            transform: 'translate(-50%, -50%)'\n          }}\n        >\n          <CircularProgress />\n        </div>\n      );\n    }\n    return (\n      <React.Fragment>\n        <Grid container justify=\"center\" direction=\"column\" alignItems=\"center\" spacing={4}>\n          <Grid item >\n            <Card>\n              <LinearProgress value={0} variant={this.state.running ? \"indeterminate\" : \"determinate\"} />\n\n              <CardContent style={{ textAlign: 'center' }}>\n                <Typography variant=\"h5\" component=\"h2\">\n                  {user.toString()}\n                </Typography>\n                <Typography component=\"p\">{msToString(this.state.localTime)}</Typography>\n                <Button color={this.state.running ? \"secondary\" : \"primary\"} variant=\"contained\" onClick={this.toggleTimer}>{this.state.running ? \"Stop\" : \"Start\"}</Button>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n      </React.Fragment>\n    );\n  }\n}\n\n\nexport default App;\n","import React from 'react';\nimport { Card, CardContent, Typography, LinearProgress, Grid, CircularProgress } from '@material-ui/core';\n\nimport { msToString, betterDateString } from './utils';\nimport user from './User';\nimport db from './db';\nconst firestore = db.firestore();\nclass Sessions extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      totalTime: 0,\n      sessions: null,\n      loading: true,\n      streamSub: null,\n    }\n  }\n  componentDidMount() {\n    firestore.collection(\"users\").doc(user).onSnapshot((snapshot) => {\n      const sessions = [];\n      const data = snapshot.data();\n      var totalTime = 0;\n      for (let [key, value] of Object.entries(data)) {\n        totalTime += value;\n        sessions.push({\n          date: key,\n          length: value,\n        });\n      }\n      sessions.sort((a, b) => {\n        if (a.date < b.date)\n          return 1;\n        if (a.date > b.date)\n          return -1;\n        return 0;\n      });\n      this.setState({\n        sessions: sessions,\n        loading: false,\n        totalTime: totalTime,\n      });\n    });\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <Grid container justify=\"center\">\n        </Grid>\n      );\n    }\n    return (\n      <React.Fragment>\n        <Grid container justify=\"center\" direction=\"row\" spacing={2} alignItems=\"center\" >\n          <Grid item xs={12}>\n            <Card style={{ margin: \"1%\" }}>\n              <CardContent style={{ textAlign: 'center' }}>\n                <Typography variant=\"h5\" component=\"h2\">\n                  {msToString(this.state.totalTime)}\n                </Typography>\n                <Typography color=\"textSecondary\" >\n                  spent on Competitive Programming\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          {this.state.loading ?\n            <Grid item> <CircularProgress /> </Grid> :\n            this.state.sessions.map((e, id) => <Grid item key={id}>\n              <Card>\n                <LinearProgress value={Math.min(Math.floor(e.length / 10320000 * 100), 100)} variant=\"determinate\" />\n                <CardContent style={{ textAlign: 'center' }}>\n                  <Typography variant=\"h5\" component=\"h2\">\n                    {msToString(e.length)}\n                  </Typography>\n                  <Typography color=\"textSecondary\">\n                    {betterDateString(e.date)}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            )}\n        </Grid>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Sessions;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Sessions from './Sessions';\n\nReactDOM.render(\n  <React.StrictMode>\n      <React.Fragment>\n        <div style={{\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}>\n      <App />\n      <Sessions />\n      </div>\n      </React.Fragment>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}